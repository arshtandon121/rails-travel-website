<style>
.navbar {
    background-color: rgba(255, 255, 255, 0.9) !important;
    box-shadow: 0 2px 4px rgba(0,0,0,.1);
    width: 100%;
    max-width: 100vw;
    overflow-x: hidden;
}

.navbar-brand {
    font-weight: 600;
    color: #2ecc71 !important;
}

.nav-link {
    color: #34495e !important;
    font-weight: 500;
    transition: color 0.3s ease;
}

.nav-link:hover {
    color: #2ecc71 !important;
}

.navbar-toggler {
    border-color: #2ecc71;
}

.navbar-toggler-icon {
    background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 30 30'%3e%3cpath stroke='rgba(46, 204, 113, 0.9)' stroke-linecap='round' stroke-miterlimit='10' stroke-width='2' d='M4 7h22M4 15h22M4 23h22'/%3e%3c/svg%3e");
}
</style>

<nav class="navbar navbar-expand-lg fixed-top">
    <div class="container">
        <%= link_to "Adventure Awaits", root_path, class: "navbar-brand" %>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav ms-auto">
                <li class="nav-item">
                    <%= link_to "Home", root_path, class: "nav-link" %>
                </li>

                <% if current_page?(root_path) %>
                    <li class="nav-item">
                        <a class="nav-link" href="#destinations">Destinations</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#camps">Camps</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#about">About</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#contact">Contact</a>
                    </li>
                    
                    <% if current_user&.admin? || current_user&.camp_owner? %>
                    <li class="nav-item" >
                    
                    <%= link_to 'Admin Dashboard', custom_admin_dashboard_path, class: 'nav-link' %>
                  
                    </li>
                    <% end %>
                <% end %>

                <% if user_signed_in? %>
                    <li class="nav-item">
                        <%= link_to "Orders", "/bookings", class: "nav-link" %>
                    </li>

                    <li class="nav-item">
                        <span class="nav-link"><%= current_user.email %></span>
                    </li>
                    <li class="nav-item">
                        <%= link_to "Sign Out", destroy_user_session_path, class: "nav-link", data: { "turbo-method": :delete } %>
                    </li>
                <% else %>
                    <li class="nav-item">
                        <%= link_to 'Login', new_user_session_path, class: 'nav-link' %>
                    </li>
                    <li class="nav-item">
                        <%= link_to 'Sign Up', new_user_registration_path, class: 'nav-link' %>
                    </li>
                <% end %>
            </ul>
        </div>
    </div>
</nav>

<script>
document.addEventListener('DOMContentLoaded', function () {
    // Add active class to navbar items when scrolling
    window.addEventListener('scroll', function () {
        document.querySelectorAll('.nav-link').forEach(function (currLink) {
            var refElement = document.querySelector(currLink.getAttribute('href'));
            if (refElement) {
                var top = refElement.offsetTop - 100;
                var bottom = top + refElement.offsetHeight;
                if (window.scrollY >= top && window.scrollY <= bottom) {
                    document.querySelectorAll('.nav-link').forEach(function (link) {
                        link.classList.remove('active');
                    });
                    currLink.classList.add('active');
                } else {
                    currLink.classList.remove('active');
                }
            }
        });
    });

    // Collapse the navbar when a link is clicked
    document.querySelectorAll('.nav-link').forEach(function (navLink) {
        navLink.addEventListener('click', function () {
            var navbarToggler = document.querySelector('.navbar-toggler');
            if (getComputedStyle(navbarToggler).display !== 'none') {
                var navbarCollapse = document.querySelector('.navbar-collapse');
                navbarCollapse.classList.remove('show');
            }
        });
    });

    // Toggle the navbar when the toggle button is clicked
    document.querySelector('.navbar-toggler').addEventListener('click', function () {
        var navbarCollapse = document.querySelector('.navbar-collapse');
        navbarCollapse.classList.toggle('show');
    });
});


</script>
